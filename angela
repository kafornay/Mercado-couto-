<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Angela Maia - Personalize sua Imagem</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Arial, sans-serif;
        background: #F6F0FA;
        display: flex;
        justify-content: center;
        padding: 20px;
    }
    .card {
        background: #fff;
        border-radius: 16px;
        padding: 25px;
        width: 100%;
        max-width: 650px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }
    h2 { color: #CFA5E6; text-align: center; }
    h3 { margin-top: 20px; border-bottom: 1px solid #D8B7E2; padding-bottom: 5px; }
    input, textarea, select, button { width: 100%; margin-top: 5px; margin-bottom: 10px; padding: 10px; border-radius: 6px; border: 1px solid #D8B7E2; box-sizing: border-box; }
    #canvas { width: 100%; border: 1px solid #ccc; margin-top: 20px; }
</style>
</head>
<body>
<div class="card">
    <h2>ðŸ’Ž Angela Maia</h2>

    <h3>1. Imagem do Produto</h3>
    <input type="file" id="upload" accept="image/*">

    <h3>2. DescriÃ§Ã£o</h3>
    <textarea id="description" placeholder="Descreva seu produto..."></textarea>
    <input type="number" id="descFontSize" value="36" min="12" max="72" placeholder="Tamanho da fonte">
    <input type="color" id="descCor" value="#FFFFFF">
    <select id="descFontFamily">
        <option value="Arial">Arial</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="Verdana">Verdana</option>
    </select>

    <h3>3. PreÃ§o e Logo</h3>
    <input type="number" id="valor" step="0.01" placeholder="Valor (ex: 99.99)">
    <input type="color" id="valorCor" value="#DAA520">
    <input type="number" id="valorFontSize" value="40" min="12" max="72">
    <input type="file" id="logoUpload" accept="image/png">

    <h3>4. Ajustes Visuais</h3>
    <input type="color" id="fundoCor" value="#000000" placeholder="Cor da faixa">
    <input type="color" id="faixaTextoCor" value="#ffffff" placeholder="Cor do texto da faixa">
    <input type="range" id="faixaWidth" min="0" max="100" value="100">
    <input type="range" id="descriptionWidthPercentage" min="10" max="100" value="80">

    <canvas id="canvas"></canvas>
    <button id="downloadBtn">ðŸ“¥ Baixar Imagem</button>
</div>

<script>
const upload = document.getElementById('upload');
const logoUpload = document.getElementById('logoUpload');
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const descriptionInput = document.getElementById('description');
const downloadBtn = document.getElementById('downloadBtn');
const valorInput = document.getElementById('valor');

const fundoCorInput = document.getElementById('fundoCor');
const faixaTextoCorInput = document.getElementById('faixaTextoCor');
const descCorInput = document.getElementById('descCor');
const valorCorInput = document.getElementById('valorCor');
const faixaWidthInput = document.getElementById('faixaWidth');
const descFontSizeInput = document.getElementById('descFontSize');
const descFontFamilyInput = document.getElementById('descFontFamily');
const valorFontSizeInput = document.getElementById('valorFontSize');
const descriptionWidthPercentageInput = document.getElementById('descriptionWidthPercentage');

let img = new Image();
let logoImg = null;
let descPos = {x: 500, y: 80};
let valorPos = {x: 500, y: 140};
let faixaWidthPercentage = 100;
let descFontSize = 36;
let descFontFamily = 'Arial';
let valorFontSize = 40;
let lines = [];
let maxDescriptionWidthPercentage = 80;
const lineHeight = 1.2;

function hexToRGBA(hex, alpha) {
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    return `rgba(${r},${g},${b},${alpha})`;
}

function drawCanvas() {
    const baseWidth = 1000, baseHeight = 1000, extraHeight = 140;
    canvas.width = baseWidth;
    canvas.height = baseHeight + extraHeight;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    if(img.src) {
        const scale = Math.min(baseWidth/img.width, baseHeight/img.height);
        const newW = img.width*scale, newH = img.height*scale;
        const xOffset = (baseWidth-newW)/2, yOffset = (baseHeight-newH)/2;
        ctx.drawImage(img, xOffset, yOffset, newW, newH);
    } else {
        ctx.fillStyle = '#f0f0f0';
        ctx.fillRect(0,0,baseWidth,baseHeight);
        ctx.fillStyle = '#ccc';
        ctx.font = '30px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Envie uma imagem para comeÃ§ar!', baseWidth/2, baseHeight/2);
    }

    // Faixa inferior
    const faixaWidth = baseWidth*(faixaWidthPercentage/100);
    const faixaX = (baseWidth-faixaWidth)/2;
    ctx.fillStyle = hexToRGBA(fundoCorInput.value,0.85);
    ctx.fillRect(faixaX, baseHeight, faixaWidth, extraHeight);
    ctx.fillStyle = faixaTextoCorInput.value;
    ctx.font = 'bold 28px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('ðŸ’Ž Angela Maia', baseWidth/2, baseHeight+40);
    ctx.font = '22px Arial';
    ctx.fillText('Aceito Encomendas!', baseWidth/2, baseHeight+70);
    ctx.font = '18px Arial';
    ctx.fillText('ðŸ“± WhatsApp: 21 97221-7122', baseWidth/2, baseHeight+95);
    ctx.fillText('ðŸ“§ Email: angela.vithyca@gmail.com', baseWidth/2, baseHeight+120);

    // DescriÃ§Ã£o
    const description = descriptionInput.value.trim();
    if(description){
        const words = description.split(' '); let line=''; lines=[];
        const maxWidth = 1000*(maxDescriptionWidthPercentage/100);
        ctx.font = `${descFontSize}px ${descFontFamily}`;
        ctx.fillStyle = descCorInput.value;
        ctx.textAlign = 'center';
        words.forEach(word=>{
            const testLine = line + word + ' ';
            if(ctx.measureText(testLine).width < maxWidth) line=testLine;
            else { lines.push(line.trim()); line=word+' '; }
        });
        lines.push(line.trim());
        let y = descPos.y;
        lines.forEach(text=>{
            ctx.fillText(text, descPos.x, y);
            y += descFontSize*lineHeight;
        });
    }

    // Valor
    const valor = valorInput.value.trim();
    if(valor){
        ctx.font = `bold ${valorFontSize}px Arial`;
        ctx.fillStyle = valorCorInput.value;
        ctx.fillText(`R$ ${valor}`, valorPos.x, valorPos.y);
    }

    // Logo
    if(logoImg){
        const size=120;
        ctx.drawImage(logoImg, canvas.width-size-25,25,size,size);
    }
}

// Eventos
upload.addEventListener('change', e=>{
    const file=e.target.files[0];
    if(!file) return;
    const reader=new FileReader();
    reader.onload=e=>{ img.src=e.target.result; };
    reader.readAsDataURL(file);
});
logoUpload.addEventListener('change', e=>{
    const file=e.target.files[0];
    if(!file) return;
    const reader=new FileReader();
    reader.onload=e=>{
        logoImg = new Image();
        logoImg.onload = drawCanvas;
        logoImg.src = e.target.result;
    };
    reader.readAsDataURL(file);
});
img.onload = drawCanvas;
document.addEventListener('DOMContentLoaded', drawCanvas);
descriptionInput.addEventListener('input', drawCanvas);
valorInput.addEventListener('input', drawCanvas);
fundoCorInput.addEventListener('input', drawCanvas);
faixaTextoCorInput.addEventListener('input', drawCanvas);
descCorInput.addEventListener('input', drawCanvas);
valorCorInput.addEventListener('input', drawCanvas);
faixaWidthInput.addEventListener('input', ()=>{ faixaWidthPercentage=parseInt(faixaWidthInput.value); drawCanvas(); });
descFontSizeInput.addEventListener('input', ()=>{ descFontSize=parseInt(descFontSizeInput.value); drawCanvas(); });
descFontFamilyInput.addEventListener('change', ()=>{ descFontFamily=descFontFamilyInput.value; drawCanvas(); });
valorFontSizeInput.addEventListener('input', ()=>{ valorFontSize=parseInt(valorFontSizeInput.value); drawCanvas(); });
descriptionWidthPercentageInput.addEventListener('input', ()=>{ maxDescriptionWidthPercentage=parseInt(descriptionWidthPercentageInput.value); drawCanvas(); });

downloadBtn.addEventListener('click', ()=>{
    const link=document.createElement('a');
    link.download='angela-maia-produto.png';
    link.href=canvas.toDataURL('image/png');
    link.click();
});
</script>
</body>
</html>
